# Руководство по SSR (Server-Side Rendering) для страниц с данными

## Проблема

По умолчанию Next.js использует статическую генерацию (SSG) для страниц, которые загружают данные. Это означает, что данные загружаются только при сборке проекта (`npm run build`), а не при каждом запросе страницы.

Для маркетплейса это проблема, так как товары и категории могут появляться и исчезать, и каждый раз перезапускать сервер не вариант.

## Решение

Для страниц, которые должны загружать данные при каждом запросе (SSR), нужно добавить следующие настройки:

```typescript
// Принудительно используем динамическую генерацию (SSR) вместо статической (SSG)
// Это гарантирует, что данные будут загружаться при каждом запросе страницы
export const dynamic = 'force-dynamic'
export const revalidate = 0
```

## Пример

См. файл `app/catalog/page.tsx`:

```typescript
import { categoriesApi, Category } from '@/lib/api'

// Принудительно используем динамическую генерацию (SSR)
export const dynamic = 'force-dynamic'
export const revalidate = 0

export default async function CatalogPage() {
  const categories = await categoriesApi.getAll()
  // ... остальной код
}
```

## Когда использовать

Добавляйте эти настройки на всех страницах, которые:
- Загружают данные из API (категории, товары, и т.д.)
- Должны показывать актуальные данные при каждом запросе
- Не должны кэшироваться статически

## Когда НЕ использовать

Не добавляйте эти настройки на страницах, которые:
- Статичны и не меняются (например, страница "О нас")
- Не загружают данные из API
- Могут быть безопасно кэшированы статически

## Примечания

- `export const dynamic = 'force-dynamic'` - принудительно использует SSR
- `export const revalidate = 0` - отключает кэширование (данные всегда свежие)
- Эти настройки должны быть добавлены в начале файла страницы, до экспорта компонента

